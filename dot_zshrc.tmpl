# PATH
export PATH="$HOME/.local/bin:$HOME/.local/share/mise/shims:$PATH"

{{ if eq .chezmoi.os "linux" -}}
# 1Password SSH agent (only when not using a forwarded agent)
if [[ -z "$SSH_AUTH_SOCK" || "$SSH_AUTH_SOCK" == *".1password"* ]]; then
  export SSH_AUTH_SOCK="$HOME/.1password/agent.sock"
fi
{{ end -}}

# Autocompletion
autoload -Uz compinit && compinit
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Za-z}'
zstyle ':completion:*' menu select

# Navigation
alias ..='cd ..'
alias wake-home='wakeonlan bc:fc:e7:6c:29:0e'
alias lg='lazygit'

# eza aliases
if (( $+commands[eza] )); then
    alias ls='eza -lh --group-directories-first --icons=auto'
    alias lsa='eza -lah --group-directories-first --icons=auto'
    alias lt='eza --tree --level=2 --long --icons --git'
    alias lta='eza --tree --level=2 --long --icons --git -a'
fi

# Zsh plugins
for plugin in zsh-autosuggestions/zsh-autosuggestions.zsh zsh-syntax-highlighting/zsh-syntax-highlighting.zsh; do
    for dir in /opt/homebrew/share /usr/share; do
        [[ -f "$dir/$plugin" ]] && source "$dir/$plugin" && break
    done
done

# Initialize starship prompt
eval "$(starship init zsh)"
eval "$(mise activate zsh)"
